<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stained Glass Documentation Tool</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Stained Glass Documentation Tool</h1>
            <p>Document, preserve, and share knowledge about stained glass heritage</p>
        </header>

        <nav class="main-nav">
            <button onclick="showView('list')">View Windows</button>
            <button onclick="showView('form')">Add Window</button>
            <button onclick="exportData()">Export Data</button>
            <button onclick="showView('about')">About</button>
        </nav>

        <div id="status-message"></div>

        <!-- List View -->
        <div id="list-view" class="view active">
            <h2>Documented Windows</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-windows">0</div>
                    <div class="stat-label">Total Windows</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="countries-count">0</div>
                    <div class="stat-label">Countries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="date-range">-</div>
                    <div class="stat-label">Date Range</div>
                </div>
            </div>
            <div id="windows-list" class="window-list"></div>
        </div>

        <!-- Form View -->
        <div id="form-view" class="view">
            <h2 id="form-title">Add New Window</h2>
            <form id="window-form">
                <div class="form-group">
                    <label for="title">Window Title <span class="required">*</span></label>
                    <input type="text" id="title" name="title" required>
                </div>

                <div class="form-group">
                    <label for="building">Building/Institution <span class="required">*</span></label>
                    <input type="text" id="building" name="building" required>
                </div>

                <div class="form-group">
                    <label for="city">City <span class="required">*</span></label>
                    <input type="text" id="city" name="city" required>
                </div>

                <div class="form-group">
                    <label for="country">Country <span class="required">*</span></label>
                    <input type="text" id="country" name="country" required>
                </div>

                <div class="form-group">
                    <label for="date">Creation Date <span class="required">*</span></label>
                    <input type="text" id="date" name="date" required placeholder="e.g., 1920, c. 1850, 13th century">
                </div>

                <div class="form-group">
                    <label>Materials Used <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-stained-glass" name="materials" value="Stained Glass">
                            <label for="mat-stained-glass">Stained Glass</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-painted-glass" name="materials" value="Painted Glass">
                            <label for="mat-painted-glass">Painted Glass</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-clear-glass" name="materials" value="Clear Glass">
                            <label for="mat-clear-glass">Clear Glass</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-lead-came" name="materials" value="Lead Came">
                            <label for="mat-lead-came">Lead Came</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-silver-stain" name="materials" value="Silver Stain">
                            <label for="mat-silver-stain">Silver Stain</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-vitreous-paint" name="materials" value="Vitreous Paint">
                            <label for="mat-vitreous-paint">Vitreous Paint</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mat-other" name="materials" value="Other">
                            <label for="mat-other">Other</label>
                        </div>
                    </div>
                    <input type="text" id="materials-other" name="materialsOther" placeholder="Specify other materials" style="margin-top: 0.5rem; display: none;">
                </div>

                <div class="optional-section">
                    <button type="button" class="optional-toggle" onclick="toggleOptionalFields()">
                        <span id="optional-toggle-text">Show Optional Fields</span>
                    </button>
                    
                    <div id="optional-fields" class="optional-fields">
                        <div class="form-group">
                            <label for="alternative-titles">Alternative Titles</label>
                            <input type="text" id="alternative-titles" name="alternativeTitles" placeholder="Separate multiple titles with commas">
                        </div>

                        <div class="form-group">
                            <label for="specific-location">Specific Location within Building</label>
                            <input type="text" id="specific-location" name="specificLocation" placeholder="e.g., North transept, Chapel of St. Mary">
                        </div>

                        <div class="form-group">
                            <label>Dimensions</label>
                            <div class="dimensions-group">
                                <input type="number" id="width" name="width" placeholder="Width" step="0.1">
                                <input type="number" id="height" name="height" placeholder="Height" step="0.1">
                                <select id="dimension-unit" name="dimensionUnit">
                                    <option value="cm">cm</option>
                                    <option value="m">m</option>
                                    <option value="in">in</option>
                                    <option value="ft">ft</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" name="description" placeholder="Describe the window's iconography, style, condition, or other notable features"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="subject-tags">Subject/Iconography Tags</label>
                            <input type="text" id="subject-tags" name="subjectTags" placeholder="e.g., Christ, Virgin Mary, saints, biblical scenes (separate with commas)">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" id="save-btn">Save Window</button>
                    <button type="button" class="btn-secondary" onclick="resetForm()">Clear Form</button>
                    <button type="button" class="btn-secondary" onclick="showView('list')">Cancel</button>
                </div>
            </form>
        </div>

        <!-- About View -->
        <div id="about-view" class="view">
            <h2>About This Tool</h2>
            <p>This tool helps researchers document stained glass windows with structured metadata that can be exported in standard formats for long-term preservation and sharing.</p>
            
            <h3>Features</h3>
            <ul>
                <li>Complete offline functionality - no internet required</li>
                <li>Standards-compliant JSON-LD export</li>
                <li>Browser-based storage - your data stays on your device</li>
                <li>Responsive design works on desktop, tablet, and mobile</li>
                <li>Accessible interface with keyboard navigation</li>
            </ul>

            <h3>Getting Started</h3>
            <ol>
                <li>Click "Add Window" to create your first record</li>
                <li>Fill in the required fields (marked with *)</li>
                <li>Expand optional fields for additional detail</li>
                <li>Save your record and repeat for other windows</li>
                <li>Export your data anytime as JSON-LD</li>
            </ol>

            <h3>Data Export</h3>
            <p>Your data is exported in JSON-LD format following Schema.org standards, ensuring compatibility with digital humanities tools and long-term preservation systems.</p>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this window record? This action cannot be undone.</p>
            <div class="modal-actions">
                <button class="btn-danger" onclick="confirmDelete()">Delete</button>
                <button class="btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>